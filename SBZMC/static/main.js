/*
* Copyright (c) 2016 Yoshihiro Furudate
* Released under the MIT license
* http://opensource.org/licenses/mit-license.php 
*/

function draw(){var e=document.getElementById("canvas"),t=100*Math.ceil(window.outerWidth/100),o=100*Math.ceil(window.outerHeight/100);if(e.width=t,e.height=o,e.getContext){var n=e.getContext("2d"),l=e.getContext("2d");for(i=0;i<Math.round(t/80);i++){n.beginPath();var a=Math.floor(4*Math.random()+2),d=Math.random()*t,r=n.createLinearGradient(d-a/2,0,d+a/2,0);r.addColorStop(0,"#00ACC0"),r.addColorStop(.3,"#00E5FF"),r.addColorStop(.5,"#64F2FF"),r.addColorStop(.7,"#00E5FF"),r.addColorStop(1,"#00ACC0"),n.strokeStyle=r,n.lineWidth=a,n.moveTo(d,0),n.lineTo(d,o),n.stroke()}for(i=0;i<Math.round(o/80);i++){l.beginPath();var c=Math.floor(4*Math.random()+2),s=Math.random()*o,u=l.createLinearGradient(0,s-c/2,0,s+c/2);u.addColorStop(0,"#00ACC0"),u.addColorStop(.3,"#00E5FF"),u.addColorStop(.5,"#64F2FF"),u.addColorStop(.7,"#00E5FF"),u.addColorStop(1,"#00ACC0"),l.strokeStyle=u,l.lineWidth=c,l.moveTo(0,s),l.lineTo(t,s),l.stroke()}}}window.onload=function(){function e(e){for(i=0;i<e.length;i++)if(e[i].lastChild.addEventListener("click",function(e){var n,i,l,a,d;return n=e.target.parentNode,i=n.nextElementSibling,l=i.offsetHeight,a=i.cloneNode(!0),i.parentNode.appendChild(a),a.style.cssText="display:block; height:auto; visibility:hidden; ",d=a.offsetHeight,i.parentNode.removeChild(a),1>l?(i.style.display="block",t(i,l,d)):o(i,l,d),d}),e[i].lastChild.innerHTML==f[0]){var n,l,a,d,r;n=e[i].lastChild.parentNode,l=n.nextElementSibling,a=l.offsetHeight,d=l.cloneNode(!0),l.parentNode.appendChild(d),d.style.cssText="display:block; height:auto; visibility:hidden; ",r=d.offsetHeight,l.parentNode.removeChild(d),l.style.display="block",l.style.minheight=r,l.style.height="auto",f.shift()}}function t(e,o,n){var i;n>o?(o+=20,e.style.height=o+"px",i=setTimeout(function(){t(e,o,n)},2.5)):(clearTimeout(i),e.style.minheight=n,e.style.height="auto")}function o(e,t,n){var i;t>=1?(t-=20,e.style.height=t+"px",i=setTimeout(function(){o(e,t,n)},2.5)):(clearTimeout(i),e.style.height=0,e.style.display="none")}function n(e,t,o){var n=t?t:400,i=30,l=n/i,a=1,d=a/i,r=0,c="";if(e){void 0!==e.getAttribute("data-fade-stock-display")&&null!==e.getAttribute("data-fade-stock-display")&&(e.style.display=e.getAttribute("data-fade-stock-display"));var s=function(t){"opacity"in e.style?e.style.opacity=t:(e.style.filter="alpha(opacity="+100*t+")",!navigator.userAgent.toLowerCase().match(/msie/)||window.opera||e.currentStyle.hasLayout||(e.style.zoom=1))};return o&&"function"==typeof o||(o=function(){}),s(0),c=setInterval(function(){r=Number((r+d).toFixed(12)),r>a&&(r=a,clearInterval(c)),s(r),r===a&&o()},l),e}}function l(e,t,o){var n=t?t:400,i=30,l=n/i,a=0,d=1/i,r=1,c="";if(e){e.setAttribute("data-fade-stock-display",e.style.display.replace("none",""));var s=function(t){"opacity"in e.style?e.style.opacity=t:(e.style.filter="alpha(opacity="+100*t+")",!navigator.userAgent.toLowerCase().match(/msie/)||window.opera||e.currentStyle.hasLayout||(e.style.zoom=1))};return o&&"function"==typeof o||(o=function(){}),s(1),c=setInterval(function(){r=Number((r-d).toFixed(12)),a>r&&(r=a,e.style.display="none",clearInterval(c)),s(r),r===a&&o()},l),e}}function a(e){if(window.confirm("本当にこのソースコードファイルをダウンロードしますか？\nAre you really download this source code file?")){var t=document.getElementsByClassName("codetext"),o="";for(i=0;i<t.length;i++)o+=t[i].textContent+"\n";var n=new Blob([o],{type:"text/plain"});if(window.navigator.msSaveBlob)window.navigator.msSaveBlob(n,e);else{var l=window.URL.createObjectURL(n),a=document.createElement("a");document.body.appendChild(a),a.href=l,a.download=e,a.click(),document.body.removeChild(a),setTimeout(function(){window.URL.revokeObjectURL(l)},5e4)}}return!1}var d=new Date,r=(String(("0"+d.getHours()).slice(-2))+String(("0"+d.getMinutes()).slice(-2)),document.getElementById("canvas"),document.getElementsByClassName("folder")),c=document.getElementsByClassName("downloads"),s=document.getElementById("scroll"),u=document.getElementById("wrap"),m=document.getElementById("pre"),y=new Slideout({panel:document.getElementById("panel"),menu:document.getElementById("menu"),padding:256,tolerance:70}),f=window.location.href.split("/");f.splice(0,5),f.pop(),urlist2=f.slice(0),f=f.concat(urlist2);var p=document.getElementsByClassName("highlight")[0],g=document.getElementById("readmemd");for(draw(),y.on("beforeopen",function(){document.querySelector(".fixed").classList.add("fixed-open"),document.querySelector(".transition").classList.add("transafter"),document.querySelector(".fixed").style.position="fixed",document.getElementById("menu").style.display="block",setTimeout(function(){document.getElementById("menu").style.opacity=1},10)}),y.on("open",function(){document.getElementById("menu").style.zIndex=2}),y.on("beforeclose",function(){document.querySelector(".fixed").classList.remove("fixed-open"),document.querySelector(".transition").classList.remove("transafter"),document.getElementById("menu").style.zIndex=0,l(document.getElementById("menu"),100),setTimeout(function(){document.getElementById("menu").scrollTop=0},100)}),y.on("close",function(){document.querySelector(".fixed").style.position="static"}),document.querySelector(".toggle-button").addEventListener("click",function(){y.toggle()}),document.querySelector(".fixed").addEventListener("click",function(){y.close()}),s.addEventListener("click",function(){s.style.color="white",u.style.color="rgb(125,125,125)",m.style.whiteSpace="pre",m.style.overflow="scroll"}),u.addEventListener("click",function(){u.style.color="white",s.style.color="rgb(125,125,125)",m.style.whiteSpace="pre-wrap",m.style.overflow="auto"}),document.getElementById("left_block").style.minHeight=window.innerHeight-125+"px",document.getElementById("right_block").style.minHeight=window.innerHeight-125+"px",e(r),n(document.body,1e3),i=0;i<2;i++){var h=document.getElementById("fina").textContent;h=h.slice(0,h.indexOf("wrap")-1);try{c[i].addEventListener("click",function(){a(h)})}catch(v){}}window.onbeforeunload=function(e){l(document.body,1e3)},p&&(p.innerHTML=p.innerHTML.replace(/\s{2,}/g,"\n")),g&&(g.innerHTML=g.innerHTML.replace(/\s{2,}/g,"\n"))};var time=!1,ua=navigator.userAgent.toUpperCase(),situation=-1!=ua.indexOf("IPHONE")||-1!=ua.indexOf("ANDROID")&&-1!=ua.indexOf("MOBILE");situation||window.addEventListener("resize",function(e){time!==!1&&clearTimeout(time),time=setTimeout(draw,1e3)});
